# GitHub PR での論文添削ガイド（教員向け）

## はじめに

このガイドは、GitHub のプルリクエスト（PR）を使った論文添削が初めての教員向けの操作手順です。
従来の Word や PDF での添削とは異なり、GitHub では**段階的な変更履歴**と**複数教員での協力添削**が可能です。

## 基本概念の理解

### プルリクエスト（PR）とは

**簡単に言うと**: 学生が「この変更を論文に取り込んでください」と提案する仕組み

```
学生の作業:
目次案作成 → 0th-draft PR作成 → 教員に添削依頼

教員の作業:
PR確認 → コメント・修正提案 → 承認・マージ
```

### 2種類のPRで効率的な添削

#### 1. **個別PR**（例：1st-draft PR）
- **目的**: 直前版からの変更点を確認
- **特徴**: 差分が明確、新規追加部分に集中できる
- **使い分け**: 増分レビューに最適

#### 2. **レビュー用PR**（自動作成・更新）
- **目的**: 論文全体の通読・添削
- **特徴**: これまでの全ての内容を含む
- **使い分け**: 全体構成、章をまたぐ整合性確認

## 基本的な添削手順

### Step 1: PR通知の確認

**メール通知例**:
```
[GitHub] k21rs001 opened PR #3: 1st-draft
```

**WebブラウザでPRにアクセス**:
1. 通知メール内のリンクをクリック
2. GitHubにログイン（初回のみ）
3. PR画面が表示される

### Step 2: 変更内容の確認

#### 差分の見方
```
GitHub PR画面で：
1. [Files changed] タブをクリック
2. 緑色（+）：追加された行
3. 赤色（-）：削除された行
4. 行番号で具体的な位置を確認
```

#### PDF確認（必要に応じて）
```
PR画面で：
1. 下部の「Checks」セクション確認
2. 「View PDF」リンクから最新PDF確認
```

### Step 3: コメント・添削の実施

#### A. 行単位でのコメント

**手順**:
1. 添削したい行の行番号をクリック
2. 💬アイコンが表示される
3. コメント入力ボックスが開く
4. 添削内容を記述
5. [Add single comment] をクリック

**コメント例**:
```
「背景」→「研究背景」の方が適切です。
この段落は第2章に移動した方が論理的です。
実験条件の記述が不十分です。詳細を追記してください。
```

#### B. Suggestion（修正提案）

**使用場面**: 具体的な修正案がある場合

**手順**:
1. 修正したい行をクリック
2. コメント入力ボックスで [📝] ボタン（Insert a suggestion）をクリック
3. 修正後の文章を記述
4. [Add single comment] をクリック

**例**:
```
元の文:
本研究では、機械学習を用いて分析を行った。

Suggestion:
本研究では、機械学習アルゴリズムのうち Random Forest を用いて分類分析を行った。
```

#### C. 複数行のまとめてコメント

**手順**:
1. 開始行の行番号をクリック
2. Shiftキーを押しながら終了行をクリック
3. 範囲選択された状態でコメント
4. [Start a review] または [Add to review] をクリック

### Step 4: レビューの完了

#### レビュー送信
```
全てのコメントを記述後：
1. 画面右上 [Review changes] ボタンをクリック
2. 全体コメントを記述（任意）
3. 以下から選択：
   - Comment: コメントのみ
   - Approve: 承認（問題なし）
   - Request changes: 修正要求
4. [Submit review] をクリック
```

#### 学生への通知
- レビュー送信と同時に学生に自動通知
- 学生は GitHub でコメントを確認し対応

## 複数教員での添削

### 役割分担例

```
主指導教員:
- 研究内容の妥当性
- 論理構成
- 実験手法の適切性

副指導教員:
- 文章表現・日本語
- 図表の品質
- 参考文献の形式

外部教員:
- 客観的視点
- 他分野からの理解しやすさ
```

### 効率的な連携方法

#### 1. **順次レビュー**
```
主指導教員のレビュー完了
↓
副指導教員がレビュー開始
↓
必要に応じて外部教員がレビュー
```

#### 2. **並行レビュー**
```
全教員が同時にレビュー開始
観点を事前に分担して重複を避ける
```

#### 3. **段階的レビュー**
```
Phase 1: 構成・内容確認
Phase 2: 詳細・表現確認
Phase 3: 最終チェック
```

## Suggestion対応フロー

### 教員側の注意点

**Suggestionを出す場合**:
1. 修正提案後、すぐにマージしない
2. 学生のSuggestion適用を待つ
3. 学生から「Re-request review」があったら確認
4. 問題なければPRをマージ

**学生とのやり取り例**:
```
教員: Suggestion付きレビュー実施
学生: Apply suggestion → Re-request review 🔄
教員: 適用内容確認 → 承認・マージ
```

## レビュー用PRの活用

### 自動更新の仕組み

**重要**: レビュー用PRは**自動更新**されます

```
学生がPR作成 → GitHub Actions自動実行
↓
1. review-branchが最新内容に更新
2. レビュー用PRに自動反映
3. 教員に通知

教員の作業: 自動更新されたレビュー用PRで全体確認
```

### 使い分けパターン

```
目次案段階（0th-draft）:
→ 0th-draft PR: 構成の相談
→ レビュー用PR: 全体方針確認

執筆段階（1st-draft以降）:
→ 各版PR: 変更点確認（効率重視）
→ レビュー用PR: 全体整合性確認

最終段階:
→ レビュー用PR: 最終確認・品質チェック
```

## よくある質問

### Q: GitHubアカウントが必要ですか？
A: はい。無料アカウントで十分です。
```
アカウント作成: https://github.com
学生リポジトリへのアクセス権限は個別に付与されます
```

### Q: 間違ってコメントした場合は？
A: 編集・削除が可能です。
```
1. 自分のコメントの [...] メニューをクリック
2. [Edit] で編集、[Delete] で削除
```

### Q: PDFでの確認はできますか？
A: はい。GitHub Actions で自動生成されます。
```
PR画面下部の「Checks」セクションでPDF確認可能
印刷しての確認も併用してください
```

### Q: 学生が修正しない場合は？
A: 段階的にアプローチしてください。
```
1. コメントでの指摘
2. Suggestion での具体的修正案
3. 直接指導・相談
```

### Q: 複数教員で矛盾する指摘をした場合は？
A: PR上で教員間協議ができます。
```
1. 他教員のコメントに返信
2. 統一見解を決定
3. 学生に統一見解を提示
```

### Q: 大幅な構成変更が必要な場合は？
A: Suggestionよりもコメントが適切です。
```
Suggestion: 軽微な修正（誤字、表現改善）
コメント: 大幅変更、概念的修正
```

### Q: レビュー用PRをマージしてしまった場合は？
A: **絶対にマージしないでください**。
```
レビュー用PRには「do-not-merge」ラベルが付いています
誤ってマージした場合は即座に連絡してください
```

## トラブルシューティング

### よくあるエラーと対処法

#### 1. PR画面でエラーが表示される
```
対処法:
1. ブラウザを再読み込み（F5）
2. GitHubからログアウト→再ログイン
3. 異なるブラウザで試行
```

#### 2. コメントが送信できない
```
確認事項:
1. インターネット接続確認
2. GitHub の権限確認
3. リポジトリへのアクセス権限確認
```

#### 3. PDF が表示されない
```
対処法:
1. GitHub Actions の実行完了を待つ
2. PR画面をリロード
3. ローカルでのLaTeXコンパイル確認
```

## 効率的な添削のコツ

### 1. **段階的レビュー**
```
1回目: 全体構成・論理性
2回目: 内容の詳細
3回目: 文章表現・体裁
```

### 2. **優先順位付け**
```
Critical: 研究の根幹に関わる問題
Major: 論文の質に大きく影響
Minor: 細かな改善点
```

### 3. **建設的フィードバック**
```
問題指摘 + 改善方向の提示
具体例の提示
参考文献の紹介
```

### 4. **学生のモチベーション維持**
```
良い点も積極的に評価
段階的な成長を認める
最終目標を常に意識させる
```

## まとめ

GitHub PRでの添削は、従来の方法と比べて以下のメリットがあります：

- ✅ **変更履歴の完全な追跡**
- ✅ **複数教員での効率的な協力**
- ✅ **学生の並行作業支援**
- ✅ **自動化による作業効率向上**

最初は操作に慣れが必要ですが、慣れると非常に効率的な添削が可能になります。
不明な点があれば、遠慮なく smkwlabML で質問してください。

---

## 参考資料

- [TEACHER-GUIDE.md](TEACHER-GUIDE.md): 技術的詳細・上級操作
- [STUDENT-GUIDE.md](STUDENT-GUIDE.md): 学生向け操作手順
- GitHub PR操作: https://docs.github.com/ja/pull-requests

## サポート

質問・トラブル時の連絡先: smkwlabML