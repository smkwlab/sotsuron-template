# 下川研卒業論文テンプレート

## 目次
  - [はじめに](#はじめに)
  - [1.基本的な使い方](#1-基本的な使い方)
  - [2.具体的な作業内容](#2-具体的な作業内容)
    - [2.1 自分用のリモートリポジトリの作成](#21-自分用のリモートリポジトリの作成)
    - [2.2 リポジトリをローカルにコピーし、作業用ワーキングディレクトリを作成](#22-リポジトリをローカルにコピーし作業用ワーキングディレクトリを作成)
    - [2.3 LaTeX環境の構築](#23-aldc-によるlatex環境の構築)
    - [2.4 commitとpush](#24-commit-push)
    - [2.5 目次案の記入](#25-目次案の記述)
    - [2.6 第1版用作業ブランチを作成](#26-第1版用作業ブランチを作成)
    - [2.7 編集作業](#27-編集作業)
    - [2.8 添削依頼](#28-添削依頼)
    - [2.9 次版用ブランチ作成](#29-次版用ブランチ作成)
    - [2.10 添削結果待ち](#210-添削結果待ち)
    - [2.11 作業サンプル](#211-作業サンプル)
  - [3.卒論の書き方 (sotsuron.tex の更新)](#3-卒業論文の書き方-sotsurontex-の更新)
    - [3.1 卒業論文としての注意事項](#31-卒業論文としての注意事項)
    - [3.2 日本語的な注意事項](#32-日本語的な注意事項)
    - [3.3 LaTeX的な注意事項](#33-latex的な注意事項)
  - [4. GitHub Actions](#4-github-actions)
    - [4.1 Reviewer割当](#41-reviewer-割当)
    - [4.2 PDF生成](#42-pdf-生成)
  - [5. その他](#5-その他)

## はじめに

これは、九州産業大学 理工学部 情報科学科 下川研究室で利用している卒業論文のテンプレートリポジトリである。
下川研では、卒業論文を作成する標準的な環境として、LaTeX と GitHub を利用する。
文章作成に LaTeX、バージョン管理およびバックアップとして GitHub を使う。

## 1. 基本的な使い方

卒業論文を執筆する上で、論文をバージョン管理していく。
第1版である初版、それに対する添削結果を受けて執筆した改定版、
最終的に、卒論提出締切日に提出する提出版など。

下川研では、これらを第n版として番号で管理し、版毎に Git のブランチを作成する。
基本的には以下の手順で執筆作業をすすめる。
これらの具体的な作業内容については[2.具体的な作業内容](#2-具体的な作業内容)で説明する。

1. テンプレートリポジトリをコピーして自分用のリポジトリーを作成
2. リポジトリーをPCにクローン
3. [aldc (Add Linx DevContainer)](https://github.com/smkwlab/aldc/blob/main/README.md)を使って
下川研 LaTeX 環境を構築
4. この時点で一度 commit, push しmainブランチを更新
5. 目次案の記述
6. 自分のリポジトリーで作業用ブランチを作成。
   - 今後、作業用ブランチは下川への提出毎に新たに作成
7. 作業用ブランチ上でレポートを作成（更新）
8. 添削を依頼するために Pull Request を送信
9. 提出したので、次の作業用ブランチを作成
10. 下川から OK のリプライが来たら終了。NG だった場合は、下川からのリプライにしたがって、8. で作成した**新しい作業用ブランチ**上でレポートを更新(6. に戻る)

## 2. 具体的な作業内容

以下の説明の section の枝番号は 1. の箇条書きの番号と対応している。

### 2.1 自分用のリモートリポジトリの作成

1. ブラウザで[このリポジトリー](https://github.com/smkwlab/sotsuron-template)にアクセスし `Use this template`  ボタンをクリック
1. リポジトリ作成画面になる
   - `Owner` は `smkwlab` のまま
   - `Repository name` は、 `k99rs999-sotsuron` のように自分の学籍番号を入れ、さらに卒業論文であることが分かるような名前にする
   - 公開範囲は `Private` のまま
1. `Create repository from template` ボタンをクリック

### 2.2 リポジトリをローカルにコピーし、作業用ワーキングディレクトリを作成

1. 作成されたリポジトリーの画面で `Code` ボタンをクリック
1. `Open with GitHub Desktop` をクリック
1. 自分のPCでリポジトリーを置くディレクトリを確認して `Clone` ボタンをクリック

### 2.3 aldc によるLaTeX環境の構築

1. [aldc](https://github.com/smkwlab/aldc)の[インストール方法](https://github.com/smkwlab/aldc/blob/main/README.md#インストール方法)に従って作業

### 2.4 commit, push

1. LaTeX環境構築終了時点で、main ブランチに commit と push
    - GitHub Desktop, git コマンドライン何を使っても良い
    - コミットメッセージは自由。お勧めは `LaTeX環境構築`

### 2.5 目次案の記述

1. おそらく目次案の作成が終わっているはずなので、作成済みの目次案を元に [sotsuron.tex](../sotsuron.tex) を編集し`chapter`, `section`, `subsection` などを記述
1. VSCode 上で ▷ ボタンをクリックすることで sotsuron.pdf を生成
    - ▷の右横の虫眼鏡が右下に描かれたアイコンをクリックしてVSCode 上で PDF をプレビュー

### 2.6 第1版用作業ブランチを作成

1. GitHub Desktop のウィンドウの最上部には、３つのボタンが並んでいる。
一番左側がリポジトリの選択。一番右側が中央リポジトリとのやり取りの処理。
そして、真ん中にあるのがブランチ処理。

```text
Current Branch
main
```

と描かれたボタンがある。このボタンの一番右端の``▼``を押す。
2. 表示されるメニュー中の`New Branch` ボタンをクリック
3. `Create a Branch`というダイアログが出るので、`Name` を **1st-draft** とする。*草稿第1版*という意味
4. `Create Branch` ボタンをクリック
5. `Publish branch` ボタンをクリック
6. 先程の真ん中のボタンが、以下に変わる。

```text
Current Branch
1st-draft
```

### 2.7 編集作業

1. GitHub Desktop で現在の草稿用ブランチが選択されていることを確認して sotsuron.tex を編集
   - `Open in Visual Studio Code` をクリックして Visual Studio Code で作業
   - このとき、Visual Studio Code の左下に、ブランチの名前が表示されている
   - 必要に応じて別のファイル（画像など）を追加したりして良い
2. ファイルを保存する度に `textlint` による自動チェックが起動
   - チェック結果が **VSCode** の **問題** に表示されるので内容を確認し適宜対応
3. VSCode 上で ▷ ボタンをクリックすることで PDF を生成
   - ▷の右横の虫眼鏡が右下に描かれたアイコンをクリックしてVSCode上でプレビュー
4. プレビューに問題ないことを確認したら、GitHub Desktop で commit
5. `Push origin` をクリックして、リモートリポジトリーに Push
6. 1.に戻る

### 2.8 添削依頼

1. sotsuron.pdf を印刷し、その印刷版を読み（可能であれば音読）、推敲。問題があれば、[2.4](#24-編集作業)に戻る
2. GitHub Desktop で `Create Pull Request` をクリックして、**Pull Request** を作成
3. ブラウザが開くので、`Title` に **現在のブランチ名** を記述
   - `Title` はデフォルトでなんらかの文字列が入っているが、それは削除する。
   - **現在のブランチ名** とは、最初であれば `1st-draft` であり、２回めであれば `2nd-draft`になるはず
4. `Write` タブに変更点などを記述
5. `Create pull request` ボタンをクリック

### 2.9 次版用ブランチ作成

1. GitHub Desktop で `Current Branch` ボタンをクリック
2. `New Branch` ボタンをクリック
3. `Name` を **2nd-draft** など、次の版であることが分かる名前にする
4. 下の `Create branch based on...` は直前の草稿のブランチ (次が `2nd-draft` なら前は `1st-draft`) を選択
5. `Create branch` ボタンをクリック
6. `Publish branch` ボタンをクリック

### 2.10 添削結果待ち

1. 下川からの返事を待つ
2. 返事の内容は、リモートリポジトリの `Pull Requests` タブの中にある
    - そこにも見当たらなければ `1 Closed` のようなリンクをクリックすると見えるはず
    - 見当たらなければ下川に問い合わせる
    - 下川は、添削結果を返信する際に、皆さんの草稿用ブランチの内容を main ブランチに反映させる作業(merge) もしている
    - したがって、返信が来たときには、リポジトリ上の main ブランチは提出した草稿と同じ内容に更新されている
3. OK ならば提出可能。以下の提出準備をする
    - 提出版の原稿に `submit` というタグを打つ
      - GitHub Desktop の `History` で一番上にある(最新の)履歴を右クリック
      - `Create Tag...` をクリック
      - `Name` に **submit** と入力し `Create Tag` ボタンをクリックしてタグを付与
      - `Push origin` をクリックして、タグを Github にプッシュ
      - 提出準備終了
      - 提出締め切りまでに印刷物を提出するのを忘れない
      - なお、論文提出後は、[概要](gaiyou.tex)の作成と口頭試問の準備
4. NG ならば現在の草稿上で編集([2.7](#27-編集作業))に戻る

### 2.11 作業サンプル

擬似的に 2.1〜2.8 の操作を[サンプルリポジトリ](https://github.com/smkwlab/toshi-thesis-branch-test)で実施してみた。
ただし、aldc 導入以前に実施したので、aldc に関する履歴はない。
Github 上で、Insights → Network
と選択することで、[ブランチ分岐](https://github.com/smkwlab/toshi-thesis-branch-test/network)を確認できる。

目次案提出までは、main ブランチで作業。
その後 1st-draft ブランチを作成し、その上で作業。
1st-draft 提出時に pull request を作成し、toshi0806 に review をリクエスト。
その後 2nd-draft ブランチを作成し、その上で作業。
添削終了後に pull request を main に merge。
2nd-draft 提出時も pull request を作成し、toshi0806 に review をリクエスト。
その後 3rd-draft ブランチで作業中。

## 3. 卒業論文の書き方 (sotsuron.tex の更新)

### 3.1 卒業論文としての注意事項

- 提出締め切りを念頭に置いて執筆を進めること

### 3.2 日本語的な注意事項

- である体で書くこと
- 長い文を書かず、適切に文を分割すること
  - 「が」で続けるのは良くない
- 適切な内容で段落を分割すること
- 文の途中に箇条書きを入れないこと
- すべての図や表は本文中で参照すること
- まとめは感想ではない。
  - 今後の課題を除いて、それ以前の本文で記述されていないことを、まとめに書いてはいけない

### 3.3 LaTeX的な注意事項

- 図や表にはキャプションを入れる。入れ方は[example.tex](example.tex)を参考にすること
- 原則として、1文1行で記述すること
  - 差分が見やすいし、編集指示も出しやすい
- `\\` による改行は `tabular` 環境以外では原則として使用不可

## 4. GitHub actions

このリポジトリには2つの GitHub action が設定されている。

## 4.1 Reviewer 割当

Pull Request を発行すると、[auto_assign_myteams.yml](.github/../auto_assign_myteams.yml) に基づき Reviewers を自動で設定する。
デフォルトでは、下川(toshi0806)を指定している。
下川研の学生はこのままで問題ない。
他の研究室の学生が利用する場合には、ここの設定を変更すること。

この機能が不要な場合には [auto_assign_myteams.yml](.github/../auto_assign_myteams.yml) を削除する。

## 4.2 PDF 生成

Pull Request を発行すると、sotsuron.tex と gaiyou.tex から PDF を自動生成し、
GitHub 上の [Release](../../releases) に配置する。

TeX 環境を持っていない人に PDF を見てもらうのに利用できる。
ただし、ここで作成された Release は一般公開されない。

この機能が不要な場合には [check.yml](.github/../workflows/check.yml) を削除する。

## 5. その他

質問があれば、遠慮なく smkwlabML ML へ。
きっと、他の人も困っている。
疑問と回答はみんなで共有しよう。
